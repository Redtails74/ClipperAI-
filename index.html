<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... -->
</head>
<body>
    <div id="app">
        <!-- ... -->
    </div>

    <script>
    const input = document.getElementById('input');
    const sendButton = document.getElementById('send');
    const chatDiv = document.getElementById('chat');
    const output = document.getElementById('output');

    // Function to send user input and receive a response
    sendButton.addEventListener('click', async () => {
        const message = input.value.trim();
        if (!message) return; // Prevent empty input

        updateChat('User', message);
        output.textContent = "Loading...";

        try {
            const response = await fetch('https://clipper.ai/api/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ message })
            });

            console.log('Response:', response); // Log the response object

            if (response.ok) {
                const data = await response.json();
                console.log('Data:', data); // Log the parsed JSON data
                updateChat('ChatGPT', data.response);
            } else {
                updateChat('Error', response.statusText);
            }

            console.log('Response processed'); // Log that the response has been processed

        } catch (error) {
            updateChat('Error', error.message);
        }

        input.value = '';
        output.textContent = "";
    });

    // Update chat function
    function updateChat(speaker, message) {
        chatDiv.innerHTML += `<div><strong>${speaker}:</strong> ${message}</div>`;
        chatDiv.scrollTop = chatDiv.scrollHeight; // Scroll to the bottom
    }

    // Function to fetch initial data
    async function fetchData() {
        try {
            const response = await fetch('https://clipper.ai/api/data');
            if (response.ok) {
                const data = await response.json();
                output.textContent = data.message;
            } else {
                output.textContent = "Error fetching data.";
            }
        } catch (error) {
            output.textContent = "Error fetching data.";
        }
    }

    // Fetch initial data when the document is loaded
    document.addEventListener('DOMContentLoaded', fetchData);
    </script>
</body>
</html>
